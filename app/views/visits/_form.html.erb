<div class="panel-group">
  <% if visit.errors.any? %>
      <div class="panel panel-danger">
        <div class="panel-heading"><%= pluralize(visit.errors.count, "error") %> prohibited this event from being saved:</div>
        <div class="panel-body">
          <ul>
            <% visit.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      </div>
  <% end %>

  <div class="panel panel-default">
    <div class="panel-heading">
      Booking info
    </div>

    <div class="panel-body">
      <div class="row">
        <div class="col-lg-6">
          <%= form_for(visit) do |f| %>
              <%= f.hidden_field :workshop_id, value: visit.workshop.try(:id) %>

              <div class="form-group <%= 'has-error' if visit.errors.include?(:client_name) -%>">
                <%= f.label :client_name %><br>
                <%= f.text_field :client_name, class: 'form-control' %>
              </div>

              <div class="form-group <%= 'has-error' if visit.errors.include?(:phone_number) -%>">
                <%= f.label :phone_number %><br>
                <%= f.text_field :phone_number, class: 'form-control' %>
              </div>

              <%= f.fields_fox :order do |builder| %>
                <%= render :partial => 'order/form', :f => builder %>
              <% end %>

              <div class="form-group <%= 'has-error' if visit.errors.include?(:description) -%>">
                <%= f.label :description %><br>
                <%= f.text_area :description, class: 'form-control' %>
              </div>

              <div class="form-group <%= 'has-error' if visit.errors.include?(:date) -%>">
                <%= f.label :start %><br>
                <%= f.datetime_select :date, class: 'form-control' %>
              </div>

              <div class="actions">
                <%= f.submit class:'btn btn-default' %>
              </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>