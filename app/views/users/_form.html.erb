<%= form_for(@user) do |f| %>
    <% if @user.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

          <ul>
            <% @user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
          <% end %>
          </ul>
        </div>
    <% end %>
    <div class="field">
      <%= f.label :username %><br>
      <%= f.text_field :username, :readonly => locals[:is_username_readonly] %>
    </div>

    <div class="field">
      <%= f.label :first_name %><br>
      <%= f.text_field :first_name %>
    </div>

    <div class="field">
      <%= f.label :last_name %><br>
      <%= f.text_field :last_name %>
    </div>

    <div class="field">
      <%= f.label :email %><br>
      <%= f.text_field :email %>
    </div>

    <div class="field">
      <%= f.label :role %><br>
      <% if current_user.try(:admin?) %>
          <%= f.select :role, User.roles.to_a.map { |w| [w[0].humanize, w[0]] } %>
      <% else %>
          <%= f.text_field :role, :readonly => true %>
      <% end %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
<% end %>
