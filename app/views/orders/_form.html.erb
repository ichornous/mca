<% if @order.errors.any? %>
    <div class="panel panel-danger">
      <div class="panel-heading"><%= pluralize(@order.errors.count, "error") %> prohibited this visit from being saved:</div>
      <div class="panel-body">
        <ul>
          <% @order.errors.full_messages.each do |message| %>
              <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    </div>
<% end %>
<div class="panel-group">
  <div class="panel panel-default">
    <div class="panel-heading">
      <%= raw(t('.booking_info')) %>
    </div>

    <div class="panel-body">
      <div class="row">
        <div class="col-lg-6">
          <%= form_for(@order) do |f| %>
              <%= f.hidden_field :workshop_id %>

              <div class="form-group">
                <div class="form-inline">
                  <div class="input-daterange" id="mca-timeslot-range"
                       data-locale="<%= I18n.locale -%>"
                       data-date-format="<%= t('time.embed.slashes') -%>">
                    <%= f.text_field :start_date, class: 'form-control input-small', value: l(f.object.start_date, format: :slashes) %>
                    <span class="add-on"><%= raw(t('.range_to')) %></span>
                    <%= f.text_field :end_date, class: 'form-control input-small', value: l(f.object.end_date, format: :slashes) %>
                  </div>
                </div>
              </div>

              <div class="form-inline">
                <div class="form-group">
                  <%= f.select :color,
                               options_for_select(Order.event_colors.map {|c| ['', c, {:'data-color' => c}]},
                                                  f.object.color),
                               { include_blank: false },
                               { class: 'mca-select-color' } %>
                </div>
              </div>

              <%= fields_for @client do |u| %>
                  <div class="form-group">
                    <%= u.label :name %><br>
                    <%= u.text_field :name, class: 'form-control' %>
                  </div>

                  <div class="form-group">
                    <%= u.label :phone %><br>
                    <%= u.text_field :phone, type: 'tel', class: 'form-control' %>
                  </div>
              <% end %>

              <%= fields_for @car do |u| %>
                  <div class="form-group">
                    <%= u.label :description %><br>
                    <%= u.text_field :description, class: 'form-control' %>
                  </div>
              <% end %>

              <!--< %= f.fields_for :orders do |builder| %>-->
                  <!--< %= render 'order_fields', :f => builder %>-->
              <!--< % end %>-->

              <div class="form-group">
                <%= f.label :description %><br>
                <%= f.text_area :description, class: 'form-control' %>
              </div>

              <div class="actions">
                <%= f.submit class:'btn btn-default' %>
              </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>